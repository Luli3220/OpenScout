{
  "username": "benjamingr",
  "agent_b_context": "\n=== PR #53800 in nodejs/node (Stars: 114794) ===\nFile: lib/internal/webstreams/readablestream.js\nPatch:\n@@ -2041,8 +2041,8 @@ function readableStreamError(stream, error) {\n   assert(stream[kState].state === 'readable');\n   stream[kState].state = 'errored';\n   stream[kState].storedError = error;\n-  stream[kIsClosedPromise].reject(error);\n   setPromiseHandled(stream[kIsClosedPromise].promise);\n+  stream[kIsClosedPromise].reject(error);\n \n   const {\n     reader,\n@@ -2051,8 +2051,8 @@ function readableStreamError(stream, error) {\n   if (reader === undefined)\n     return;\n \n-  reader[kState].close.reject(error);\n   setPromiseHandled(reader[kState].close.promise);\n+  reader[kState].close.reject(error);\n \n   if (readableStreamHasDefaultReader(stream)) {\n     for (let n = 0; n < reader[kState].readRequests.length; n++)\n\nFile: lib/internal/webstreams/writablestream.js\nPatch:\n@@ -768,15 +768,15 @@ function writableStreamRejectCloseAndClosedPromiseIfNeeded(stream) {\n     };\n   }\n \n-  stream[kIsClosedPromise].reject(stream[kState]?.storedError);\n   setPromiseHandled(stream[kIsClosedPromise].promise);\n+  stream[kIsClosedPromise].reject(stream[kState]?.storedError);\n \n   const {\n     writer,\n   } = stream[kState];\n   if (writer !== undefined) {\n-    writer[kState].close.reject?.(stream[kState].storedError);\n     setPromiseHandled(writer[kState].close.promise);\n+    writer[kState].close.reject?.(stream[kState].storedError);\n   }\n }\n \n\n\n=== PR #53622 in nodejs/node (Stars: 114794) ===\nFile: test/parallel/test-timers-nan-duration-warning-promises.js\nPatch:\n@@ -0,0 +1,11 @@\n+'use strict';\n+\n+const common = require('../common');\n+const assert = require('assert');\n+const { setTimeout } = require('timers/promises');\n+\n+process.once('warning', common.mustCall((warning) => {\n+  assert.strictEqual(warning.name, 'TimeoutNaNWarning');\n+}));\n+\n+setTimeout(NaN).then(common.mustCall(), common.mustNotCall());\n\n\n=== PR #53623 in nodejs/node (Stars: 114794) ===\nFile: lib/internal/readline/utils.js\nPatch:\n@@ -1,8 +1,7 @@\n 'use strict';\n \n const {\n-  ArrayPrototypeSlice,\n-  ArrayPrototypeSort,\n+  ArrayPrototypeToSorted,\n   RegExpPrototypeExec,\n   StringFromCharCode,\n   StringPrototypeCharCodeAt,\n@@ -385,7 +384,7 @@ function commonPrefix(strings) {\n   if (strings.length === 1) {\n     return strings[0];\n   }\n-  const sorted = ArrayPrototypeSort(ArrayPrototypeSlice(strings));\n+  const sorted = ArrayPrototypeToSorted(strings);\n   const min = sorted[0];\n   const max = sorted[sorted.length - 1];\n   for (let i = 0; i < min.length; i++) {\n\nFile: typings/primordials.d.ts\nPatch:\n@@ -128,6 +128,7 @@ declare namespace primordials {\n   export const ArrayPrototypeSlice: UncurryThis<typeof Array.prototype.slice>\n   export const ArrayPrototypeSort: UncurryThis<typeof Array.prototype.sort>\n   export const ArrayPrototypeSplice: UncurryThis<typeof Array.prototype.splice>\n+  export const ArrayPrototypeToSorted: UncurryThis<typeof Array.prototype.toSorted>\n   export const ArrayPrototypeIncludes: UncurryThis<typeof Array.prototype.includes>\n   export const ArrayPrototypeIndexOf: UncurryThis<typeof Array.prototype.indexOf>\n   export const ArrayPrototypeJoin: UncurryThis<typeof Array.prototype.join>\n\n"
}