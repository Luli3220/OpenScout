{
  "username": "coding-boot-camp",
  "agent_b_context": "\n=== PR #2 in coding-boot-camp/continuation-courses-public (Stars: 16) ===\n\n=== PR #1 in coding-boot-camp/continuation-courses-public (Stars: 16) ===\n\n=== Fallback Source Audit: java/project/lesson-files/6/src/main/java/com/technews/controller/HomepageController.java (Size: 7133 bytes) ===\npackage com.technews.controller;\n\nimport com.technews.model.Comment;\nimport com.technews.model.Post;\nimport com.technews.model.User;\nimport com.technews.repository.CommentRepository;\nimport com.technews.repository.PostRepository;\nimport com.technews.repository.UserRepository;\nimport com.technews.repository.VoteRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.util.List;\n\n@Controller\npublic class HomepageController {\n\n    @Autowired\n    UserRepository userRepository;\n\n    @Autowired\n    PostRepository postRepository;\n\n    @Autowired\n    VoteRepository voteRepository;\n\n    @Autowired\n    CommentRepository commentRepository;\n\n\n    @GetMapping(\"/login\")\n    public String login(Model model, HttpServletRequest request) {\n\n        if (request.getSession(false) != null) {\n            return \"redirect:/\";\n        }\n\n        model.addAttribute(\"user\", new User());\n        return \"login\";\n    }\n\n\n    @GetMapping(\"/users/logout\")\n    public String logout(HttpServletRequest request) {\n        if (request.getSession(false) != null) {\n            request.getSession().invalidate();\n        }\n        return \"redirect:/login\";\n    }\n\n\n    @GetMapping(\"/\")\n    public String homepageSetup(Model model, HttpServletRequest request) {\n        User sessionUser = new User();\n\n        if (request.getSession(false) != null) {\n            sessionUser = (User) request.getSession().getAttribute(\"SESSION_USER\");\n            model.addAttribute(\"loggedIn\", sessionUser.isLoggedIn());\n        } else {\n            model.addAttribute(\"loggedIn\", false);\n        }\n\n\n        List<Post> postList = postRepository.findAll();\n        for (Post p : postList) {\n            p.setVoteCount(voteRepository.countVotesByPostId(p.getId()));\n            User user = userRepository.getById(p.getUserId());\n            p.setUserName(user.getUsername());\n        }\n\n        model.addAttribute(\"postList\", postList);\n        model.addAttribute(\"loggedIn\", sessionUser.isLoggedIn());\n        model.addAttribute(\"point\", \"point\");\n        model.addAttribute(\"points\", \"points\");\n\n        return \"homepage\";\n    }\n\n\n    @GetMapping(\"/dashboardEmptyTitleAndLink\")\n    public String dashboardEmptyTitleAndLinkHandler(Model model, HttpServletRequest request) throws Exception {\n        setupDashboardPage(model, request);\n        model.addAttribute(\"notice\", \"To create a post the Title and Link must be populated!\");\n        return \"dashboard\";\n    }\n\n\n    @GetMapping(\"/dashboard\")\n    public String dashboardPageSetup(Model model, HttpServletRequest request) throws Exception {\n\n        if (request.getSession(false) != null) {\n            setupDashboardPage(model, request);\n            return \"dashboard\";\n        } else {\n            mod\n... (file truncated)\n"
}