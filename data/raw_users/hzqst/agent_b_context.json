{
  "username": "hzqst",
  "agent_b_context": "\n=== PR #736 in DiligentGraphics/DiligentCore (Stars: 705) ===\nFile: Tests/DiligentCoreTest/src/ShaderTools/SPIRVShaderResourcesTest.cpp\nPatch:\n@@ -26,6 +26,7 @@\n \n #include \"SPIRVShaderResources.hpp\"\n #include \"GLSLangUtils.hpp\"\n+#include \"DXCompiler.hpp\"\n #include \"DefaultShaderSourceStreamFactory.h\"\n #include \"RefCntAutoPtr.hpp\"\n #include \"EngineMemory.h\"\n@@ -46,18 +47,26 @@ namespace\n \n class SPIRVShaderResourcesTest : public ::testing::Test\n {\n+public:\n+    static std::unique_ptr<IDXCompiler> DXCompiler;\n+\n protected:\n     static void SetUpTestSuite()\n     {\n         GLSLangUtils::InitializeGlslang();\n+\n+        DXCompiler = CreateDXCompiler(DXCompilerTarget::Vulkan, 0, nullptr);\n     }\n \n     static void TearDownTestSuite()\n     {\n         GLSLangUtils::FinalizeGlslang();\n+\n+        DXCompiler.reset();\n     }\n };\n \n+std::unique_ptr<IDXCompiler> SPIRVShaderResourcesTest::DXCompiler;\n \n struct SPIRVShaderResourceRefAttribs\n {\n@@ -70,22 +79,61 @@ struct SPIRVShaderResourceRefAttribs\n     const Uint32                                   BufferStride;\n };\n \n-std::vector<unsigned int> LoadSPIRVFromHLSL(const char* FilePath, SHAD\n... (truncated)\n\n\n=== PR #733 in DiligentGraphics/DiligentCore (Stars: 705) ===\nFile: Graphics/ShaderTools/src/SPIRVShaderResources.cpp\nPatch:\n@@ -74,6 +74,11 @@ static RESOURCE_DIMENSION GetResourceDimension(const diligent_spirv_cross::Compi\n             default: return RESOURCE_DIM_UNDEFINED;\n         }\n     }\n+    else if (type.basetype == diligent_spirv_cross::SPIRType::BaseType::Struct)\n+    {\n+        // Uniform buffers and storage buffers are Struct types\n+        return RESOURCE_DIM_BUFFER;\n+    }\n     else\n     {\n         return RESOURCE_DIM_UNDEFINED;\n@@ -126,10 +131,28 @@ SPIRVShaderResourceAttribs::SPIRVShaderResourceAttribs(const diligent_spirv_cros\n // clang-format on\n {}\n \n+// Constructor for push constants (no binding or descriptor set decoration)\n+SPIRVShaderResourceAttribs::SPIRVShaderResourceAttribs(const char*  _Name,\n+                                                       ResourceType _Type,\n+                                                       Uint32       _BufferStaticSize) noexcept :\n+    // clang-format off\n+    Name                          {_Name},\n+    // For push constants, ArraySize is always 1\n... (truncated)\n\nFile: Tests/DiligentCoreTest/src/ShaderTools/SPIRVShaderResourcesTest.cpp\nPatch:\n@@ -0,0 +1,320 @@\n+/*\n+ *  Copyright 2025 Diligent Graphics LLC\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ *  In no event and under no legal theory, whether in tort (including negligence),\n+ *  contract, or otherwise, unless required by applicable law (such as deliberate\n+ *  and grossly negligent acts) or agreed to in writing, shall any Contributor be\n+ *  liable for any damages, including any direct, indirect, special, incidental,\n+ *  or consequential\n... (truncated)\n\n\n=== PR #356 in alliedmodders/hl2sdk (Stars: 417) ===\n"
}