{
  "username": "Tynab",
  "agent_b_context": "\n=== PR #178 in Nohit-Java17/Jira-Project (Stars: 7) ===\n\n=== PR #177 in Nohit-Java17/Jira-Project (Stars: 7) ===\n\n=== PR #176 in Nohit-Java17/Jira-Project (Stars: 7) ===\n\n=== Fallback Source Audit: main.py (Size: 85467 bytes) ===\n# -*- coding: utf-8 -*-\nimport argparse\nimport json\nimport logging\nimport math\nimport os\nimport re\nimport subprocess\nimport sys\nimport time\nfrom http.cookiejar import MozillaCookieJar\nfrom pathlib import Path\nfrom typing import IO, Union\n\nimport browser_cookie3\nimport demoji\nimport m3u8\nimport requests\nimport yt_dlp\nfrom bs4 import BeautifulSoup\nfrom coloredlogs import ColoredFormatter\nfrom dotenv import load_dotenv\nfrom pathvalidate import sanitize_filename\nfrom requests.exceptions import ConnectionError as conn_error\nfrom tqdm import tqdm\n\nfrom constants import *\nfrom tls import SSLCiphers\nfrom utils import extract_kid\nfrom vtt_to_srt import convert\n\nDOWNLOAD_DIR = os.path.join(os.getcwd(), \"out_dir\")\n\nretry = 3\ndownloader = None\nlogger: logging.Logger = None\ndl_assets = False\ndl_captions = False\ndl_quizzes = False\nskip_lectures = False\ncaption_locale = \"en\"\nquality = None\nbearer_token = None\nportal_name = None\ncourse_name = None\nkeep_vtt = False\nskip_hls = False\nconcurrent_downloads = 10\nsave_to_file = None\nload_from_file = None\ncourse_url = None\ninfo = None\nkeys = {}\nid_as_course_name = False\nis_subscription_course = False\nuse_h265 = False\nh265_crf = 28\nh265_preset = \"medium\"\nuse_nvenc = False\nbrowser = None\ncj = None\nuse_continuous_lecture_numbers = False\nchapter_filter = None\nYTDLP_PATH = os.path.join(os.path.dirname(sys.executable), \"yt-dlp.exe\")\n\n\ndef deEmojify(inputStr: str):\n    return demoji.replace(inputStr, \"\")\n\n\n# from https://stackoverflow.com/a/21978778/9785713\ndef log_subprocess_output(prefix: str, pipe: IO[bytes]):\n    if pipe:\n        for line in iter(lambda: pipe.read(1), \"\"):\n            logger.debug(\"[%s]: %r\", prefix, line.decode(\"utf8\").strip())\n        pipe.flush()\n\n\ndef parse_chapter_filter(chapter_str: str):\n    \"\"\"\n    Given a string like \"1,3-5,7,9-11\", return a set of chapter numbers.\n    \"\"\"\n    chapters = set()\n    for part in chapter_str.split(\",\"):\n        if \"-\" in part:\n            try:\n                start, end = part.split(\"-\")\n                start = int(start.strip())\n                end = int(end.strip())\n                chapters.update(range(start, end + 1))\n            except ValueError:\n                logger.error(\"Invalid range in --chapter argument: %s\", part)\n        else:\n            try:\n                chapters.add(int(part.strip()))\n            except ValueError:\n                logger.error(\"Invalid chapter number in --chapter argument: %s\", part)\n    return chapters\n\n\n# this is the first function that is called, we parse the arguments, setup the logger, and ensure that required directories exist\ndef pre_run():\n    global dl_assets, dl_captions, dl_quizzes, skip_lectures, caption_locale, quality, bearer_token, course_name, keep_vtt, skip_hls, concurrent_downloads, load_from_file, save_to_file, bearer_token, course_url, info, logger, keys, id_as_course_name, LOG_LEVEL, use_h265, h265_crf, h265_preset, use_nvenc, browser, is_subscription_course, DOWNLOAD_DIR, use_continuous_lecture_numbers, chap\n... (file truncated)\n"
}