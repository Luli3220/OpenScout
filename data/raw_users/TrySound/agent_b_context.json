{
  "username": "TrySound",
  "agent_b_context": "\n=== PR #5510 in webstudio-is/webstudio (Stars: 8052) ===\n\n=== PR #4625 in webstudio-is/webstudio (Stars: 8052) ===\nFile: apps/builder/app/builder/features/command-panel/command-state.ts\nPatch:\n@@ -0,0 +1,44 @@\n+import { atom, computed } from \"nanostores\";\n+import type { ReactNode } from \"react\";\n+\n+const $commandPanel = atom<\n+  | undefined\n+  | {\n+      lastFocusedElement: null | HTMLElement;\n+    }\n+>();\n+\n+export const $isCommandPanelOpen = computed(\n+  $commandPanel,\n+  (commandPanel) => commandPanel !== undefined\n+);\n+\n+export const openCommandPanel = () => {\n+  const activeElement =\n+    document.activeElement instanceof HTMLElement\n+      ? document.activeElement\n+      : null;\n+  // store last focused element\n+  $commandPanel.set({\n+    lastFocusedElement: activeElement,\n+  });\n+};\n+\n+export const closeCommandPanel = ({\n+  restoreFocus = false,\n+}: { restoreFocus?: boolean } = {}) => {\n+  const commandPanel = $commandPanel.get();\n+  $commandPanel.set(undefined);\n+  $commandContent.set(undefined);\n+  $commandSearch.set(\"\");\n+  // restore focus in the next frame\n+  if (restoreFocus && commandPanel?.lastFocusedElement) {\n+    requestAnimationFrame(() => {\n+      command\n... (truncated)\n\nFile: apps/builder/app/builder/features/command-panel/groups/index.ts\nPatch:\n@@ -0,0 +1,80 @@\n+import { computed } from \"nanostores\";\n+import {\n+  $componentOptions,\n+  ComponentGroup,\n+  type ComponentOption,\n+} from \"./component-group\";\n+import { $tagOptions, TagGroup, type TagOption } from \"./tag-group\";\n+import {\n+  $breakpointOptions,\n+  BreakpointGroup,\n+  type BreakpointOption,\n+} from \"./breakpoint-group\";\n+import { $pageOptions, PageGroup, type PageOption } from \"./page-group\";\n+import {\n+  $commandOptions,\n+  CommandsGroup,\n+  type CommandOption,\n+} from \"./command-group\";\n+import { $tokenOptions, TokenGroup, type TokenOption } from \"./token-group\";\n+\n+export type Option =\n+  | ComponentOption\n+  | TagOption\n+  | BreakpointOption\n+  | PageOption\n+  | CommandOption\n+  | TokenOption;\n+\n+export const $allOptions = computed(\n+  [\n+    $componentOptions,\n+    $tagOptions,\n+    $breakpointOptions,\n+    $pageOptions,\n+    $commandOptions,\n+    $tokenOptions,\n+  ],\n+  (\n+    componentOptions,\n+    tagOptions,\n+    breakpointOptions,\n+    pageOptions,\n+    com\n... (truncated)\n\nFile: apps/builder/app/builder/features/command-panel/index.ts\nPatch:\n@@ -1 +1,2 @@\n+export { openCommandPanel } from \"./command-state\";\n export * from \"./command-panel\";\n\nFile: apps/builder/app/builder/shared/commands.ts\nPatch:\n@@ -57,6 +57,7 @@ import { getInstanceLabel } from \"./instance-label\";\n import { $instanceTags } from \"../features/style-panel/shared/model\";\n import { reactPropsToStandardAttributes } from \"@webstudio-is/react-sdk\";\n import { isSyncIdle } from \"./sync/sync-server\";\n+import { openDeleteUnusedTokensDialog } from \"~/builder/shared/style-source-utils\";\n \n export const $styleSourceInputElement = atom<HTMLInputElement | undefined>();\n \n@@ -659,5 +660,13 @@ export const { emitCommand, subscribeCommands } = createCommandsEmitter({\n         }\n       },\n     },\n+\n+    {\n+      name: \"deleteUnusedTokens\",\n+      label: \"Delete unused tokens\",\n+      handler: () => {\n+        openDeleteUnusedTokensDialog();\n+      },\n+    },\n   ],\n });\n\n\n=== PR #5482 in webstudio-is/webstudio (Stars: 8052) ===\n"
}